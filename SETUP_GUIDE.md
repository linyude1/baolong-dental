# å®é¾™å£è…”ç®¡ç†ç³»ç»Ÿ - å®Œæ•´è®¾ç½®æŒ‡å—

æœ¬ç³»ç»ŸåŒ…å«å‰ç«¯Reactåº”ç”¨å’Œåç«¯Node.js APIï¼Œä½¿ç”¨Supabaseä½œä¸ºæ•°æ®åº“ã€‚

## ç¬¬ä¸€æ­¥ï¼šè®¾ç½®Supabaseæ•°æ®åº“

### 1. åˆ›å»ºSupabaseé¡¹ç›®

1. è®¿é—® [https://supabase.com](https://supabase.com)
2. æ³¨å†Œ/ç™»å½•è´¦å·
3. ç‚¹å‡» "New Project"
4. å¡«å†™é¡¹ç›®ä¿¡æ¯ï¼š
   - **Name**: baolong-dental
   - **Database Password**: ä¿å­˜æ­¤å¯†ç ï¼ˆå¼ºçƒˆæ¨èä½¿ç”¨å¯†ç ç®¡ç†å™¨ï¼‰
   - **Region**: é€‰æ‹©ç¦»ä½ æœ€è¿‘çš„åŒºåŸŸï¼ˆå»ºè®®é€‰æ‹©Singaporeæˆ–Tokyoï¼‰
5. ç­‰å¾…é¡¹ç›®åˆå§‹åŒ–ï¼ˆçº¦2åˆ†é’Ÿï¼‰

### 2. åˆ›å»ºæ•°æ®åº“è¡¨

1. åœ¨Supabaseé¡¹ç›®ä¸­ï¼Œç‚¹å‡»å·¦ä¾§èœå•çš„ **SQL Editor**
2. ç‚¹å‡» **New Query**
3. å¤åˆ¶ `server/database/schema.sql` æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹
4. ç²˜è´´åˆ°SQLç¼–è¾‘å™¨ä¸­
5. ç‚¹å‡» **Run** æŒ‰é’®æ‰§è¡ŒSQL
6. ç¡®è®¤å³ä¾§æ˜¾ç¤º "Success. No rows returned"

### 3. è·å–APIå¯†é’¥

1. ç‚¹å‡»å·¦ä¾§èœå•çš„ **Settings** â†’ **API**
2. æ‰¾åˆ°ä»¥ä¸‹ä¿¡æ¯å¹¶å¤åˆ¶ä¿å­˜ï¼š
   - **Project URL**: `https://xxxxx.supabase.co`
   - **anon public key**: `eyJhbGci...` (å¾ˆé•¿çš„ä¸€ä¸²å­—ç¬¦)

## ç¬¬äºŒæ­¥ï¼šé…ç½®åç«¯æœåŠ¡å™¨

### 1. å®‰è£…ä¾èµ–

```bash
cd server
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶åˆ›å»º.env
cp .env.example .env
```

ç¼–è¾‘ `server/.env` æ–‡ä»¶ï¼Œå¡«å…¥Supabaseå‡­è¯ï¼š

```env
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
PORT=3000
NODE_ENV=development
```

**é‡è¦**: æ›¿æ¢ä¸Šé¢çš„URLå’ŒKEYä¸ºä½ åœ¨ç¬¬ä¸€æ­¥è·å–çš„å®é™…å€¼ï¼

### 3. å¯åŠ¨åç«¯æœåŠ¡å™¨

```bash
npm start
```

ä½ åº”è¯¥çœ‹åˆ°ï¼š
```
ğŸš€ å®é¾™å£è…”APIæœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:3000
ğŸ“‹ APIæ–‡æ¡£: http://localhost:3000/
ğŸ’š å¥åº·æ£€æŸ¥: http://localhost:3000/health
```

è®¿é—® http://localhost:3000/health ç¡®è®¤æœåŠ¡å™¨æ­£å¸¸è¿è¡Œã€‚

## ç¬¬ä¸‰æ­¥ï¼šé…ç½®å‰ç«¯åº”ç”¨

### 1. å®‰è£…ä¾èµ–

```bash
# å›åˆ°é¡¹ç›®æ ¹ç›®å½•
cd ..
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

ç¼–è¾‘é¡¹ç›®æ ¹ç›®å½•çš„ `.env.local` æ–‡ä»¶ï¼Œå¡«å…¥ç›¸åŒçš„Supabaseå‡­è¯ï¼š

```env
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key-here
VITE_API_URL=http://localhost:3000
```

### 3. å¯åŠ¨å‰ç«¯åº”ç”¨

```bash
npm run dev
```

è®¿é—®æ˜¾ç¤ºçš„URLï¼ˆé€šå¸¸æ˜¯ `http://localhost:5173`ï¼‰

## ç¬¬å››æ­¥ï¼šéªŒè¯ç³»ç»ŸåŠŸèƒ½

### 1. åˆ›å»ºç¬¬ä¸€ä¸ªæ‚£è€…

1. åœ¨é¦–é¡µç‚¹å‡»"é¦–æ¬¡å°±è¯Š"æŒ‰é’®
2. å¡«å†™æ‚£è€…ä¿¡æ¯ï¼š
   - å§“åï¼šæµ‹è¯•æ‚£è€…
   - æ‰‹æœºï¼š13800138000
   - é€‰æ‹©ç‰™ä½ï¼ˆå¯é€‰ï¼‰
   - å¡«å†™è¯Šç–—å†…å®¹
3. ç‚¹å‡»"ç¡®è®¤å¹¶ä¿å­˜è®°å½•"
4. è¿”å›é¦–é¡µï¼Œåº”è¯¥èƒ½çœ‹åˆ°æ–°åˆ›å»ºçš„æ‚£è€…

### 2. åˆ·æ–°æµ‹è¯•

1. åˆ·æ–°æµè§ˆå™¨ï¼ˆF5ï¼‰
2. æ•°æ®åº”è¯¥ä»ç„¶å­˜åœ¨ï¼ˆè¯´æ˜æ•°æ®å·²ä¿å­˜åˆ°Supabaseï¼‰

### 3. æµ‹è¯•å…¶ä»–åŠŸèƒ½

- ç‚¹å‡»æ‚£è€…æŸ¥çœ‹è¯¦æƒ…
- æ·»åŠ æ–°çš„è¯Šç–—è®°å½•
- è®¿é—®"æˆ‘çš„"é¡µé¢ï¼Œç‚¹å‡»"åŒ»ç–—ç‰©èµ„ç®¡ç†"
- æ·»åŠ åº“å­˜ç‰©èµ„å’Œé‡‡è´­é¡¹

## å¸¸è§é—®é¢˜

### Q: å‰ç«¯æ˜¾ç¤º"åŠ è½½ä¸­..."åä¸€ç›´ä¸æ˜¾ç¤ºæ•°æ®ï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. `.env.local`ä¸­çš„Supabase URLå’ŒKEYæ˜¯å¦æ­£ç¡®
2. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰ï¼ŒæŸ¥çœ‹Consoleæ˜¯å¦æœ‰é”™è¯¯
3. ç¡®è®¤Supabaseé¡¹ç›®çš„RLSï¼ˆRow Level Securityï¼‰è§„åˆ™ï¼š
   - è¿›å…¥Supabase â†’ Authentication â†’ Policies
   - ç¡®ä¿æ‰€æœ‰è¡¨éƒ½æ²¡æœ‰å¯ç”¨RLSï¼Œæˆ–è€…å·²ç»è®¾ç½®äº†æ­£ç¡®çš„ç­–ç•¥

**ä¸´æ—¶è§£å†³æ–¹æ¡ˆ**ï¼ˆå¼€å‘ç¯å¢ƒï¼‰ï¼š
1. åœ¨Supabaseä¸­ï¼Œè¿›å…¥ Table Editor
2. å¯¹æ¯ä¸ªè¡¨ï¼ˆpatients, treatment_recordsç­‰ï¼‰ï¼Œç‚¹å‡»è¡¨åæ—çš„è®¾ç½®å›¾æ ‡
3. é€‰æ‹© "Edit Table"
4. å…³é—­ "Enable Row Level Security (RLS)"

### Q: åç«¯æœåŠ¡å™¨å¯åŠ¨å¤±è´¥ï¼Ÿ

**A**: ç¡®ä¿ï¼š
1. Node.jsç‰ˆæœ¬ >= 16
2. `server/.env` æ–‡ä»¶å­˜åœ¨ä¸”é…ç½®æ­£ç¡®
3. ç«¯å£3000æœªè¢«å ç”¨

### Q: å¦‚ä½•æ·»åŠ ç¤ºä¾‹æ•°æ®ï¼Ÿ

**A**: åœ¨Supabase SQL Editorä¸­è¿è¡Œï¼š

```sql
-- æ·»åŠ ç¤ºä¾‹æ‚£è€…
INSERT INTO patients (name, phone, card_number, age, gender, avatar) VALUES
('å¼ ä¼Ÿ', '138-0000-1234', '1', '35', 'ç”·', 'https://picsum.photos/seed/p1/200/200'),
('æå¨œ', '139-1111-5678', '2', '28', 'å¥³', 'https://picsum.photos/seed/p2/200/200');

-- æ·»åŠ ç¤ºä¾‹è¯Šç–—è®°å½•
INSERT INTO treatment_records (patient_id, visit_date, visit_time, treatment_type, tooth_position, description, status)
SELECT 
  id, 
  CURRENT_DATE, 
  '09:30', 
  'åˆè¯Š', 
  'UR-6', 
  'æ ¹ç®¡æ²»ç–—ï¼šé¦–æ¬¡å¼€é«“ï¼Œå°å¤±æ´»å‰‚',
  'å¾…æ£€æŸ¥'
FROM patients WHERE name = 'å¼ ä¼Ÿ';
```

## ä¸‹ä¸€æ­¥

ç³»ç»Ÿå·²ç»å®Œå…¨é…ç½®å¥½ï¼ä½ ç°åœ¨å¯ä»¥ï¼š

1. **è‡ªå®šä¹‰UI** - ä¿®æ”¹é¢œè‰²ã€å­—ä½“ç­‰æ ·å¼
2. **æ·»åŠ åŠŸèƒ½** - å®ç°å›¾ç‰‡ä¸Šä¼ ã€æŠ¥è¡¨å¯¼å‡ºç­‰
3. **éƒ¨ç½²ä¸Šçº¿** - ä½¿ç”¨Vercel/Netlifyéƒ¨ç½²å‰ç«¯ï¼ŒRailway/Herokuéƒ¨ç½²åç«¯
4. **å¯ç”¨èº«ä»½éªŒè¯** - ä½¿ç”¨Supabase Authæ·»åŠ ç”¨æˆ·ç™»å½•

## æŠ€æœ¯æ”¯æŒ

- Supabaseæ–‡æ¡£ï¼šhttps://supabase.com/docs
- Reactæ–‡æ¡£ï¼šhttps://react.dev
- Expressæ–‡æ¡£ï¼šhttps://expressjs.com

ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰
